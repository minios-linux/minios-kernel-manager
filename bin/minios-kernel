#!/bin/sh
#
# MiniOS Kernel Manager CLI Launcher
# This script launches the kernel manager CLI application
#

set -e

# Find the real directory of the script
SCRIPT_DIR=$(dirname "$(readlink -f -- "$0")")

# Always prefer local source version over installed version
DIR="$(dirname "$SCRIPT_DIR")/lib"
if [ -f "$DIR/minios_kernel.py" ]; then
    # Use local source version
    exec python3 -u "$DIR/minios_kernel.py" "$@"
elif [ -f "/usr/lib/minios-kernel-manager/minios_kernel.py" ]; then
    # Fallback to installed version
    exec python3 -u "/usr/lib/minios-kernel-manager/minios_kernel.py" "$@"
else
    echo "Error: Could not find minios_kernel.py" >&2
    exit 1
fi